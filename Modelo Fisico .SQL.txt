create table pessoa(
	id_pessoa serial,
	nome varchar not null,
	data_nascimento date not null,
	sexo varchar not null,
	cnpj varchar,
	nome_oficina varchar, 
	especializacao varchar,
	cnh varchar,
	pessoa_tipo integer,
	primary key(id_pessoa)
);
	
create table contrata(
	id_contrata serial,
	fk_pessoa_id_pessoa integer not null references pessoa(id_pessoa),
	fk_pessoa_id_mecanico integer not null references pessoa(id_pessoa),
	hora_contrata time not null,
	data_contrata date not null
);

create table tipo_contato(
	id_tipo_contato serial,
	tipo_contato varchar not null,
	primary key(id_tipo_contato)
);

create table contato(
	id_contato serial,
	contato varchar not null,
	fk_pessoa_id_pessoa integer not null references pessoa(id_pessoa),
	fk_tipo_contato_id_tipo_contato integer not null references tipo_contato(id_tipo_contato),
	primary key(id_contato)
);

create table marca(
	id_marca serial,
	marca varchar not null,
	primary key(id_marca)
);

create table modelo(
	id_modelo serial,
	modelo_veiculo varchar not null,
	ano_veiculo integer not null,
	cor varchar not null,
	fk_marca_id_marca integer not null,
	primary key(id_modelo)
);

create table categoria(
	id_categoria serial,
	categoria varchar not null,
	primary key(id_categoria)
	
);

create table veiculo(
	placa varchar not null,
	id_veiculo serial,
	fk_pessoa_id_pessoa integer references pessoa(id_pessoa),
	fk_modelo_id_modelo integer references modelo(id_modelo),
	fk_categoria_id_categoria integer references categoria(id_categoria),	
	primary key(id_veiculo)
);

create table tipo_sensor(
	id_tipo_sensor serial,
	tipo_sensor varchar,
	primary key(id_tipo_sensor)
);

create table sensores(
	id_sensor serial,
	nome_sensor varchar,
	descricao varchar,
	fk_veiculo_id_veiculo integer references veiculo(id_veiculo),
	fk_tipo_sensor_id_tipo_sensor integer references tipo_sensor(id_tipo_sensor),
	primary key (id_sensor)
);

create table historico(
	data_analise date not null,
	hora_analise time not null,
	id_historico serial,
	primary key(id_historico)
);

create table geram(
	fk_sensores_id_sensor integer references sensores(id_sensor),
	fk_historico_id_historico integer references historico(id_historico),
	estado_peca integer not null
)
